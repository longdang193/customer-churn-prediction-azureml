# Data Directory

This directory contains the raw datasets for the customer churn prediction project.

## Files

- `churn.csv` - Full dataset (10,000 rows) for Azure ML pipelines

**Note:** The `churn.csv` file is excluded from version control (see `.gitignore`). Download the dataset from the source (see Dataset Source below) and place it in this directory.

## Dataset Source

[Churn for Bank Customers - Kaggle](https://www.kaggle.com/datasets/mathchi/churn-for-bank-customers)

## Dataset Description

Bank customer churn prediction dataset with 14 columns:

- **RowNumber** - Row number
- **CustomerId** - Unique customer identifier
- **Surname** - Customer surname
- **CreditScore** - Credit score
- **Geography** - Country (France, Germany, Spain)
- **Gender** - Male/Female
- **Age** - Customer age
- **Tenure** - Years with the bank
- **Balance** - Account balance
- **NumOfProducts** - Number of products
- **HasCrCard** - Has credit card (0/1)
- **IsActiveMember** - Active member (0/1)
- **EstimatedSalary** - Estimated salary
- **Exited** - Target variable (0=stayed, 1=churned)

## Usage

### Register Data Asset in Azure ML

After placing `churn.csv` in this directory, register it as a data asset:

```bash
python setup/create_data_asset.py --data-path data
```

The script will:

- Register the data directory as a `uri_folder` type data asset
- Use configuration from `config.env` (or defaults: `churn-data` version `1`)
- Make the data available for Azure ML pipelines

**Options:**

- `--data-path`: Path to data directory (default: `data`)
- `--name`: Data asset name (default: from `DATA_ASSET_FULL` in `config.env`)
- `--version`: Data asset version (default: from `DATA_VERSION` in `config.env`)

See `setup/README.md` for more details.

### Reference in Pipelines

Once registered, reference the data asset in your pipeline configuration:

```python
raw_data = "azureml:churn-data:1"
```

### Local Development

For local development and testing, you can:

- Use the full dataset directly from `data/churn.csv`
- Create a subset for faster iteration
- Download the dataset from the [Kaggle source](https://www.kaggle.com/datasets/mathchi/churn-for-bank-customers)

## Generated Files (Not in Repository)

Processed data files (train/test splits, encoders, scalers) are generated by the `data_prep` component and stored in Azure ML job outputs. These files are excluded from version control via `.gitignore`:

- `data/processed/` - Processed data outputs from full pipeline runs
- `data/processed_smoke/` - Processed data outputs from smoke tests
